<%= form_with(model: @user) do |form| %>
  <div data-controller="tom-select" class="space-y-12">
    <div class="grid grid-cols-1 gap-x-8 gap-y-10 border-b border-gray-900/10 pb-12 md:grid-cols-3">
      <div class="sm:flex-auto">
        <h1 class="text-base font-semibold leading-6 text-indigo-500"><%= t("views.users.personal_details_section") %></h1>
        <p class="mt-2 text-sm text-gray-700"><%= t("views.users.list_personal_details") %></p>
      </div>
      <div class="grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 md:col-span-2">
        <div class="col-span-6">
          <%= form.label :avatar, class: "mr-5 mb-2 text-sm font-medium text-gray-900" do %>
            <%= t("views.settings.employee_picture") %>
            <span class="ml-3 text-gray-500 text-lg"><%= t("views.settings.click_on_the_picture") %></span>
          <% end %>
          <%= form.file_field :avatar, class: "hidden", accept: 'image/svg,image/png,image/jpg,image/jpeg', id: "avatar-input" %>
          <label for="avatar-input" class="cursor-pointer">
            <%= image_tag @user.avatar_url_or_default, class: "w-32 h-32 rounded-full" %>
          </label>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :first_name, t("attributes.user.first_name") %>
          <div class="mt-2">
            <%= form.text_field :first_name, class: "w-full" %>
            <%= inline_error_for(:first_name, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :last_name, t("attributes.user.last_name") %>
          <div class="mt-2">
            <%= form.text_field :last_name, class: "w-full" %>
            <%= inline_error_for(:last_name, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-3 sm:col-start-1">
          <%= form.label :email, t("attributes.user.email") %>
          <div class="mt-2">
            <%= form.text_field :email, class: "w-full" %>
            <%= inline_error_for(:email, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :phone, t("attributes.user.phone") %>
          <div class="mt-2">
            <%= form.text_field :phone, class: "w-full" %>
            <%= inline_error_for(:phone, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-3 sm:col-start-1">
          <%= form.label :cin, t("attributes.user.employee_administrative.cin") %>
          <div class="mt-2">
            <%= form.text_field :cin, class: "w-full" %>
            <%= inline_error_for(:cin, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-3">
          <%= form.label :birthdate, t("attributes.user.employee_administrative.birthday") %>
          <div class="mt-2">
            <%= form.date_field :birthdate, class: "w-full" %>
            <%= inline_error_for(:birthdate, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-4">
          <%= form.label :nationality, t("attributes.user.employee_administrative.nationality") %>
          <div class="mt-2">
            <%= form.text_field :nationality, class: "w-full" %>
            <%= inline_error_for(:nationality, @user).html_safe %>
          </div>
        </div>
        <div class="sm:col-span-2">
          <%= form.label :gender, t("attributes.user.employee_administrative.gender") %>
          <div class="mt-2">
            <%= form.select :gender, User.genders.keys.collect { |gender| [User.human_enum_name(:gender, gender), gender] }, include_blank: true %>
            <%= inline_error_for(:gender, @user).html_safe %>
          </div>
        </div>
      </div>
    </div>

    <!-- Contract nested form -->
    <%#= render partial:"users/components/contract_form", locals:{form: form} %>


    <!-- Function nested form -->
    <%#= render partial:"users/components/function_form", locals:{form: form} %>

  <div class="flex items-center justify-end gap-x-6 border-t border-gray-900/10 px-4 py-4 sm:px-8">
    <%= link_to t("buttons.cancel"), (action_name == 'edit' ? user_path(@user, type: @type) : dashboard_path), class: "text-sm font-semibold leading-6 text-gray-900" %>
    <%= form.submit t("buttons.save"), class: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" %>
  </div>
<% end %>
